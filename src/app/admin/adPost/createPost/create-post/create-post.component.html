<div class="content-wrapper">
  <section class="content-header">
    <div class="container-fluid">
      <div class="row mb-2">
        <div class="col-sm-12">
          <h1 class="m-0 text-dark">Add Post</h1>
        </div>
      </div>
    </div>
  </section>
  <section class="content">
    <div class="container-fluid">
      <div class="row">
        <div class="col-md-10 offset-1">
          <div class="card card-primary">
            <div class="card-header">
              <h3 class="card-title">Add Post</h3>
            </div>

            <form name="addcategoryform" #addcategoryForm="ngForm">
              <div class="card-body table-responsive p-0">

                <div class="card-body">
                  <div class="row">
                    <div class="form-group col-6">
                      <label for="Name">Product Title</label>
                      <input class="form-control" [(ngModel)]="model.productTitle" name="productTitle" required />
                    </div>
                    <div class="form-group col-6">
                      <label for="image">Product Image</label>
                      <img *ngIf="model.productImage != ''" [src]="model.productImage"
                        style="width: 60px;padding:0 10px" /><br>
                      <p-fileUpload #fubauto mode="basic" name="productImage[]" [url]="uploadUrl+'imageuploadadverpost'"
                        accept="image/*" maxFileSize="1000000" (onProgress)="uploadProgress()"
                        (onUpload)="onBasicPimage($event)" [auto]="true" chooseLabel="Browse"></p-fileUpload>
                        <span class="imgUploadInfo">The standard size of image upload is 3:2 (eg. 780 * 520)</span>

                    </div>
                  </div>
                  <div class="row">
                    <div class="form-group col-6">
                      <label for="Name">Select Category</label>
                      <!-- <nz-input-group [nzSuffix]="suffixIcon">
                        <input type="text" class="form-control" nz-input placeholder="Search" [(ngModel)]="searchValue" name="searchValue" />
                      </nz-input-group> -->
                      <!-- <ng-template #suffixIcon>
                        <i class="fa fa-search"></i>
                      </ng-template> -->
                      <nz-tree
                        [nzData]="nodes"
                        [nzSearchValue]="searchValue"
                        (nzClick)="nzEvent($event)"
                        (nzExpandChange)="nzEvent($event)"
                        (nzSearchValueChange)="nzEvent($event)"
                      >
                      </nz-tree>
                    </div>
                    <div class="form-group col-6">
                      <label for="Name">Select Customer</label>
                      <p-dropdown class="pDropdwon" filterBy="label,value" [filter]="true" [options]="userlistData"
                        optionLabel="name" optionValue="_id" [(ngModel)]="model.userDAta" (ngModelChange)="getUserId($event)" name="userDAta"></p-dropdown>
                        <br>

                    </div>
                  </div>
                  <div class="row">
                    <div class="col-12">
                      <div class="row">
                        <div class="form-group col-6">
                          <label for="latitude">Latitude:  </label>
                          <span id="latitude" ></span>
                        </div>
                        <div class="form-group col-6">
                          <label for="longitude">Longitude:  </label>
                          <span id="longitude" ></span>
                        </div>
                      </div>
                      <input class="col-12" id="pac-input" class="controls form-control" type="text" placeholder="Search Box" >
                      <div class="col-12" id="map" #map ></div>
                    </div>
                  </div>
                  <div class="row" *ngIf="items">
                    <ng-container *ngFor="let f of items;let j = index">
                      <div class="form-group col-6"
                        *ngIf="f.type == 'Input'">
                        <!-- <span *ngIf="f.name!='Seller Name'"> -->
                        <label [for]="f.name">{{f.name}}</label>
                        <input type="text" class="form-control" name="{{f.name}}{{j}}" placeholder="{{f.name}}"
                          [(ngModel)]="f.value"  #{{f.name}}="ngModel" />
                          <!-- </span> -->
                      </div>
                      <div class="form-group col-6"
                        *ngIf="f.type == 'number' || f.type == 'Number'">
                        <!-- <span *ngIf="f.name!='Seller Number'"> -->
                        <label [for]="f.name">{{f.name}}</label>
                        <input type="number" class="form-control" name="{{f.name}}{{j}}" placeholder="{{f.name}}"
                          [(ngModel)]="f.value" #{{f.name}}="ngModel"  min="0"/>
                        <!-- </span> -->
                      </div>
                      <div class="form-group col-6" *ngIf="f.type == 'Select'">
                        <label [for]="f.name">{{f.name}}</label>
                        <p-dropdown class="pDropdwon" name="{{f.name}}{{j}}" filterBy="label,value" [filter]="true"
                          [options]="f.option" [optionLabel]="f.label" [(ngModel)]="f.value" [name]="f.name">
                        </p-dropdown>
                      </div>

                      <div class="form-group col-6" *ngIf="f.type == 'Multiselect'">
                        <label [for]="f.name">{{f.name}}</label>
                        <p-multiSelect class="pDropdwon" name="{{f.name}}{{j}}" filterBy="label,value" [filter]="true"
                          [options]="f.option" [optionLabel]="f.label" [(ngModel)]="f.value" [name]="f.name">
                        </p-multiSelect>
                      </div>
                      <div class="form-group col-12" *ngIf="f.type == 'Radio'">
                        <label [for]="f.name">{{f.name}}</label>
                        <p-radioButton *ngFor="let o of f.option" value="{{o.value}}" label="{{o.label}}"
                          [(ngModel)]="f.value" name="{{f.name}}{{j}}"></p-radioButton>
                      </div>
                      <div class="form-group col-12" *ngIf="f.type == 'Checkbox'">
                        <label [for]="f.name">{{f.name}}</label>
                        <input type="checkbox"  value="{{f.value}}" [checked]="f.value"  [(ngModel)]="f.value" name="{{f.name}}{{j}}" />
                      </div>
                      <div class="imageUploadContainer" *ngIf="f.type == 'ImagePicker'">
                        <h5>{{f.name}}</h5>
                        {{f.value}}
                        <p-fileUpload #fubauto mode="basic" name="{{f.name}}{{j}}[]"
                          [url]="uploadUrl+'imageuploadadverpost'" accept="image/*" maxFileSize="1000000"
                          (onProgress)="uploadProgress()" (onUpload)="onBasicUploadAuto($event,j)" [auto]="true"
                          chooseLabel="Browse"></p-fileUpload>
                          <span class="imgUploadInfo">The standard size of image upload is 3:2 (eg. 780 * 520)</span>
                      </div>
                      <div class="form-group col-12" *ngIf="f.type == 'Datepicker'">
                        <label [for]="f.name">{{f.name}}</label>
                        <p-calendar [(ngModel)]="f.value" name="{{f.name}}{{j}}" [readonlyInput]="true" required></p-calendar>
                      </div>
                      <div class="form-group col-12" *ngIf="f.type == 'Textarea'">
                        <label [for]="f.name">{{f.name}}</label>
                        <textarea class="form-control" name="{{f.name}}{{j}}" placeholder="{{f.name}}"
                          [(ngModel)]="f.value" #{{f.name}}="ngModel"></textarea>
                      </div>
                    </ng-container>
                  </div>
                  <div class="row" *ngIf="staticField">
                    <ng-container *ngFor="let f of staticField;let j = index">
                      <div class="form-group col-6" *ngIf="f.type == 'Input'">
                        <!-- <span *ngIf="f.name!='Seller Name'"> -->
                        <label [for]="f.name">{{f.name}}</label>
                        <input type="text" class="form-control" [disabled]="(f.name === 'Seller Name' || f.name === 'Seller Number')" name="{{f.name}}{{j}}" placeholder="{{f.name}}"
                          [(ngModel)]="f.value" #{{f.name}}="ngModel" />
                        <!-- </span> -->
                      </div>
                      <div class="form-group col-6" *ngIf="f.type == 'number' || f.type == 'Number'">
                        <!-- <span *ngIf="f.name!='Seller Number'"> -->
                        <label [for]="f.name">{{f.name}}</label>
                        <div class="input-group mb-3">
                          <div class="input-group-prepend">
                            <span class="input-group-text" id="basic-addon1">{{f.icon}}</span>
                          </div>
                        <input type="number" class="form-control" [disabled]="(f.name === 'Seller Name' || f.name === 'Seller Number')" name="{{f.name}}{{j}}" placeholder="{{f.name}}"
                          [(ngModel)]="f.value" #{{f.name}}="ngModel" />

                        </div>
                         <!-- </span> -->
                      </div>
                      <div class="form-group col-6" *ngIf="f.type == 'Select'">
                        <label [for]="f.name">{{f.name}}</label>
                        <p-dropdown class="pDropdwon" name="{{f.name}}{{j}}" filterBy="label,value" [filter]="true"
                          [options]="f.option" [optionLabel]="f.label" [(ngModel)]="f.value" [name]="f.name">
                        </p-dropdown>
                      </div>
                      <div class="form-group col-6" *ngIf="f.type == 'Multiselect'">
                        <label [for]="f.name">{{f.name}}</label>
                        <p-multiSelect class="pDropdwon" name="{{f.name}}{{j}}" filterBy="label,value" [filter]="true"
                          [options]="f.option" [optionLabel]="f.label" [(ngModel)]="f.value" [name]="f.name">
                        </p-multiSelect>
                      </div>
                      <div class="form-group col-12" [class.d-flex]="f?.flex" *ngIf="f.type == 'DatePicker' && f.name == 'Do not disturb hours'">
                        <span  style="float:left;max-width:400px" ><label [for]="f.name" >{{f.name}}</label>
                        <span *ngFor="let o of f.option">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                        <input type="radio"  [checked]="f.isSelected == o.value" [value]="o.value" class="pt-1"
                          [(ngModel)]="f.isSelected" name="{{f.name}}{{j}}" (ngModelChange)="getDonotDistrub($event,f)" />
                          &nbsp;&nbsp;&nbsp;&nbsp;<span>{{o.label}}</span></span></span>
                          <ng-container *ngIf="f.isSelected">
                            <ng-container *ngFor="let g of f.value;let k = index">
                              <span style="float:left;max-width:200px"><label [for]="g.from" class="m-1 pl-3">From</label>
                                <p-calendar [(ngModel)]="g.from" name="from" [readonlyInput]="true"
                                  [timeOnly]="true"></p-calendar></span>
                                <span style="float:left;max-width:200px">
                                <label [for]="g.to" class="m-1 pl-3">To</label>
                                <p-calendar [(ngModel)]="g.to" name="to" [readonlyInput]="true"
                                  [timeOnly]="true"></p-calendar></span>
                              </ng-container>
                          </ng-container>
                      </div>
                      <div class="form-group col-12" *ngIf="f.type == 'Checkbox'">
                        <label [for]="f.name">{{f.name}}</label>
                          <input type="checkbox"  value="{{f.value}}" [checked]="f.value"  [(ngModel)]="f.value" name="{{f.name}}{{j}}" />
                      </div>
                      <div class="imageUploadContainer" *ngIf="f.type == 'ImagePicker'">
                        <h5>{{f.name}}</h5>
                        {{f.value}}<br>
                        <p-fileUpload #fubauto mode="basic" name="{{f.name}}{{j}}[]"
                          [url]="uploadUrl+'imageuploadadverpost'" accept="image/*" maxFileSize="1000000"
                          (onProgress)="uploadProgress()" (onUpload)="onBasicUploadAuto($event,j)" [auto]="true"
                          chooseLabel="Browse"></p-fileUpload>
                          <span class="imgUploadInfo">The standard size of image upload is 3:2 (eg. 780 * 520)</span>
                      </div>
                      <div class="form-group col-12" *ngIf="f.type == 'Datepicker'  && f.name != 'Do not disturb hours'">
                        <label [for]="f.name">{{f.name}}</label>
                        <p-calendar [(ngModel)]="f.value" name="{{f.name}}{{j}}" [readonlyInput]="true" required></p-calendar>
                      </div>
                      <div class="form-group col-12" *ngIf="f.type == 'Textarea'">
                        <label [for]="f.name">{{f.name}}</label>
                        <textarea class="form-control" name="{{f.name}}{{j}}" placeholder="{{f.name}}"
                          [(ngModel)]="f.value" #{{f.name}}="ngModel"></textarea>
                      </div>
                    </ng-container>

                  </div>
                  <div class="row" >
                    <ng-container *ngFor="let item of imgAd;let i=index;">
                      <div class=" col-4">
                        <h5>Ad image {{i+1}}</h5>
                        <img *ngIf="model.filename != ''" [src]="item.filename"
                        style="width: 60px;padding:0 10px" /><br>
                        <p-fileUpload #fubauto mode="basic" name="addimage{{i}}[]"
                          [url]="uploadUrl+'imageuploadadverpost'" accept="image/*" maxFileSize="1000000"
                          (onProgress)="uploadProgress()" (onUpload)="onBasicUploadAdd($event,i)" [auto]="true"
                          chooseLabel="Browse"></p-fileUpload>
                          <span class="imgUploadInfo">The standard size of image upload is 3:2 (eg. 780 * 520)</span>
                      </div>
                      <div class="col-2">
                        <p-button label="" icon="pi pi-minus" *ngIf="i !== 0"  styleClass="ui-button-danger" class="removeButtonOption" (onClick)="remAd(i)"></p-button>
                        <p-button label="" icon="pi pi-plus" *ngIf="6 >=i" styleClass="ui-button-info" class="removeButtonOption" (onClick)="addAd()"></p-button>
                      </div>
                    </ng-container>
                  </div>
                </div>
              </div>

              <div class="card-footer">

                <button type="button" (click)="add_category()" class="btn btn-primary subBut pull-right"
                  [disabled]="! addcategoryForm.valid">Submit</button>
                <button [routerLink]="['/admin/listPost']" class="btn btn-default cancelBut"
                  style="font-weight: bold;float:right;">Cancel</button>
              </div>
            </form>
          </div>
        </div>
      </div>
    </div>
  </section>
</div>
