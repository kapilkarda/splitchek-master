<div class="content-wrapper">
	<section class="content-header">
		<div class="container-fluid">
			<div class="row mb-2">
				<div class="col-sm-6">
					<h1>Manage Downloads</h1>
				</div>
			</div>
		</div>
	</section> 
	<section class="content-header">
		<div class="container-fluid">
			<div class="row mb-2">
				<div class="col-sm-6">
					<h4>Filters</h4>
					<form name="filterForm"  #filterForm="ngForm">
						<p-multiSelect [options]="cities" name="fielddata" [(ngModel)]="model.fielddata" #fielddata="ngModel" [panelStyle]="{minWidth:'12em'}"></p-multiSelect>
						<button type="button" (click)="filterData()" class="btn btn-primary subBut" [disabled]="! filterForm.valid" style="margin-left:5px;">Filter</button>
						<button type="button" (click)="downloadData()" class="btn btn-primary subBut" [disabled]="! filterForm.valid">Download</button> 
					</form>
				</div>
			</div>
		</div>
	</section> 
	<section class="content">   
		<div class="card" *ngIf="userData && userData.length > 0; else noRecord">
			<div class="card-body table-responsive p-0">
				<p-table #dt *ngIf="userData" [value]="userData" [paginator]="true" [alwaysShowPaginator]="false" [rows]="10" [scrollable]="false" [globalFilterFields]="['email','name']" [totalRecords]="totalRecords" class="table table-head-fixed" >
					<ng-template pTemplate="caption">
						<div style="text-align: right">        
							<i class="fa fa-search" style="margin:4px 4px 0 0"></i>
							<input type="text" pInputText size="50" placeholder=" " (input)="dt.filterGlobal($event.target.value, 'contains')" style="width:auto">
						</div>
					</ng-template>
					<ng-template pTemplate="header" let-columns>
						<tr>
							<th style="width: 8%">#</th>
							<th style="width: 18%" [pSortableColumn]="'name'" *ngIf="(filter == false &&  fieldDisplay.name==true) || (filter == true &&  fieldDisplay.name==true)">
								Name
								<p-sortIcon [field]="'name'" ariaLabel="Activate to sort" ariaLabelDesc="Activate to sort in descending order" ariaLabelAsc="Activate to sort in ascending order"></p-sortIcon>
							</th>
							<th style="width: 25%" [pSortableColumn]="'email'" *ngIf="(filter == false &&  fieldDisplay.email==true) || (filter == true &&  fieldDisplay.email==true)">
								Email
								<p-sortIcon [field]="'email'" ariaLabel="Activate to sort" ariaLabelDesc="Activate to sort in descending order" ariaLabelAsc="Activate to sort in ascending order"></p-sortIcon>
							</th>
							<th style="width: 11%" [pSortableColumn]="'gender'" *ngIf="(filter == false &&  fieldDisplay.gender==true) || (filter == true &&  fieldDisplay.gender==true)">
								Gender
								<p-sortIcon [field]="'gender'" ariaLabel="Activate to sort" ariaLabelDesc="Activate to sort in descending order" ariaLabelAsc="Activate to sort in ascending order"></p-sortIcon>
							</th>
							<th style="width: 14%" [pSortableColumn]="'loginType'" *ngIf="(filter == false &&  fieldDisplay.loginType==true) || (filter == true &&  fieldDisplay.loginType==true)">
								Login From
								<p-sortIcon [field]="'loginType'" ariaLabel="Activate to sort" ariaLabelDesc="Activate to sort in descending order" ariaLabelAsc="Activate to sort in ascending order"></p-sortIcon>
							</th>
							<th style="width: 10%" *ngIf="(filter == false && fieldDisplay.status==true) || (filter == true &&  fieldDisplay.status==true)">Status</th>
							<!-- <th style="width: 22%">Action</th> -->
						</tr>
					</ng-template>
						<ng-template pTemplate="body" let-rowData let-i="rowIndex">
							<tr>
								<td>{{i+1}}</td>
								<td *ngIf="(filter == false &&  fieldDisplay.name==true) || (filter == true &&  fieldDisplay.name==true)">{{rowData.name}}</td>
								<td *ngIf="(filter == false &&  fieldDisplay.email==true) || (filter == true &&  fieldDisplay.email==true)">{{rowData.email}}</td>
								<td *ngIf="(filter == false &&  fieldDisplay.gender==true) || (filter == true &&  fieldDisplay.gender==true)">{{rowData.gender}}</td>
								<td *ngIf="(filter == false &&  fieldDisplay.loginType==true) || (filter == true &&  fieldDisplay.loginType==true)">
									<ng-container *ngIf="rowData.loginType == 1">
											Mobile
									</ng-container>
									<ng-container *ngIf="rowData.loginType == 2">
										Email
									</ng-container>
									<ng-container *ngIf="rowData.loginType == 3">
										FaceBook
									</ng-container>
									
								</td>
								<td *ngIf="(filter == false &&  fieldDisplay.status==true) || (filter == true &&  fieldDisplay.status==true) ">
									<ng-container *ngIf="rowData.status == 1; else deactiveStatusText">
											Active
									</ng-container>
									<ng-template #deactiveStatusText>Deactive</ng-template>
								</td>
								<!-- <td>
									<button type="text" [routerLink]="['/admin/viewdetail',rowData._id]"   class="btn btn-grey" title="view"><i class="fa fa-eye" aria-hidden="true"></i></button>
									<button type="text" (click)=delete_user(rowData._id);  class="btn btn-grey" title="delete"><i class="fa fa-trash" aria-hidden="true"></i></button>
									<button type="button" (click)=status_change(rowData._id,rowData.status);  class="btn btn-blue">
										<ng-container *ngIf="rowData.status == 1; else deactiveStatus">
											<i class="fa fa-toggle-off" title="Deactivate User"></i>
										</ng-container>
										<ng-template #deactiveStatus>
											<i class="fa fa-toggle-on" title="Activate User"></i>
										</ng-template>
									</button>
									<button type="button"  (click)="showDialog(rowData._id)" class="btn btn-blue" title="Suspend User"><i class="fa fa-ban"></i></button>
									<button type="text" [routerLink]="['/admin/viewcharmrdetail',rowData._id]"   class="btn btn-grey" title="view charmrs"><i class="fa fa-paw" aria-hidden="true"></i></button>
								</td> -->
							</tr>
						</ng-template>
					</p-table>
				</div>
			</div>
	</section>
</div>
<ng-template #noRecord>No Record Found</ng-template>
<!-- <p-confirmDialog header="Confirmation" icon="pi pi-exclamation-triangle" width="500" height="120"></p-confirmDialog>
<p-dialog header="Suspend User" [(visible)]="display" [style]="{width: '40%', height: '40%'}">
	<div class="row">
		<div class="col-md-12">
			<div class="login-panel panel panel-default">
				<div class="panel-body">
						<form name="suspendUserform" #suspendUserForm="ngForm">
						<input type="hidden"  name="_id" [(ngModel)]="model._id" #id="ngModel"/>
						<fieldset>
							<div class="form-group">
								<input type="text" class="form-control" name="suspendDays" id="SuspendDays" placeholder="Suspend Days..." [(ngModel)]="model.suspendDays" #suspendDays="ngModel" required number  />
								<div *ngIf="suspendDays.errors && suspendDays.touched">   
									<span class="error" *ngIf="suspendDays.errors?.required">Suspend Days are mandatory.</span>
									<span class="error" *ngIf="suspendDays.errors?.number">Only numbers allowed.</span>
								</div> 
							</div>
							
							
							<button type="button" (click)="suspend_user()" class="btn btn-primary subBut" [disabled]="! suspendUserForm.valid">Suspend User</button>
							
						</fieldset>
					</form>
				</div>
			</div>
		</div>
	</div>
</p-dialog> -->